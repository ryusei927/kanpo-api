# 漢方データ（仮のデータ）
kampo_data = {
    "001": {"葛根(カッコン)": 4, "大棗(タイソウ)": 3, "麻黄(マオウ)": 3, "甘草(カンゾウ)":2, "桂皮(ケイヒ)":2, "芍薬(シャクヤク)":2, "生姜(ショウキョウ)":2},
    "002": {"葛根(カッコン)": 4, "大棗(タイソウ)": 3, "麻黄(マオウ)": 3,"甘草(カンゾウ)":2, "桂皮(ケイヒ)":2, "芍薬(シャクヤク)":2,"辛夷(シンイ)":2, "川芎(センキュウ)":2,"生姜(ショウキョウ)":1},
    "003": {"当帰(トウキ)": 6, "柴胡(サイコ)": 5, "黄芩(オウゴン)": 3, "甘草(カンゾウ)":2, "升麻(ショウマ)":2, "大黄(ダイオウ)":0.5},
    "005": {"桂皮(ケイヒ)":4, "延胡索(エンゴサク)": 3, "牡蠣(ボレイ)": 3,"茴香(ウイキョウ)":1.5, "甘草(カンゾウ)":1, "縮砂(シュクシャ)":1,"良姜(リョウキョウ)":0.5},
     "006": {"桔梗(キキョウ)": 3, "柴胡(サイコ)": 3, "川芎(センキュウ)":3, "茯苓(ブクリョウ)":3, "樸樕(ボクソク)":3, "独活(ドクカツ)":1.5, "防風(ボウフウ)":1.5, "甘草(カンゾウ)":1, "荊芥(ケイガイ)":1,"生姜(ショウキョウ)":1},
     "007":{"地黄(ジオウ)":6, "山茱萸(サシュユ)":3, "山薬(サンヤク)":3, "沢瀉(タクシャ)":3, "茯苓(ブクリョウ)":3, "牡丹皮(ボタンピ)":2.5, "桂皮(ケイヒ)":1, "附子(ブシ末)":0.5},
     "008":{"柴胡(サイコ)":6,"半夏(ハンゲ)":4,"黄芩(オウゴン)": 3,"芍薬(シャクヤク)":3,"大棗(タイソウ)":3,"枳実(キジツ)":2,"生姜(ショウキョウ)":1,"大黄(ダイオウ)":1},
     "009":{"柴胡(サイコ)":7,"半夏(ハンゲ)":5,"黄芩(オウゴン)": 3, "大棗(タイソウ)":3,"人参(ニンジン)":3, "甘草(カンゾウ)":2,"生姜(ショウキョウ)":1},
     "010":{"柴胡(サイコ)":5, "半夏(ハンゲ)":4,"黄芩(オウゴン)": 2, "甘草(カンゾウ)":2,"桂皮(ケイヒ)":2, "芍薬(シャクヤク)":2, "大棗(タイソウ)":2, "人参(ニンジン)":2,"生姜(ショウキョウ)":1},
     "011":{"柴胡(サイコ)":6, "黄芩(オウゴン)":3, "栝楼根(カロコン)":3, "桂皮(ケイヒ)":3, "牡蛎(ボレイ)":3, "乾姜(カンキョウ)":2, "甘草(カンゾウ)":2},
     "012":{"柴胡(サイコ)":5,"半夏(ハンゲ)":4,"桂皮(ケイヒ)":3,"茯苓(ブクリョウ)":3,"黄芩(オウゴン)":2.5,"大棗(タイソウ)":2.5,"人参(ニンジン)":2.5,"牡蛎(ボレイ)":2.5, "竜骨(リュウコツ)":2.5, "生姜(ショウキョウ)":1},
     "014":{"半夏(ハンゲ)":5, "黄芩(オウゴン)":2.5, "乾姜(カンキョウ)":2.5, "甘草(カンゾウ)":2.5, "大棗(タイソウ)":2.5, "人参(ニンジン)":2.5, "黄連(オウレン)":1},
     "015":{"黄芩(オウゴン)":3,"黄連(オウレン)":2, "山梔子(サンシシ)":2, "黄柏(オウバク)":1.5},
     "016":{"半夏(ハンゲ)":6,"茯苓(ブクリョウ)":5, "厚朴(コウボク)":3,"蘇葉(ソヨウ)":2,"生姜(ショウキョウ)":1},
     "017":{"沢瀉(タクシャ)":4,"蒼朮(ソウジュツ)":3,"猪苓(チョレイ)":3, "茯苓(ブクリョウ)":3, "桂皮(ケイヒ)":1.5},
     "018":{"桂皮(ケイヒ)":4,"芍薬(シャクヤク)":4,"蒼朮(ソウジュツ)":4,"大棗(タイソウ)":4, "甘草(カンゾウ)":2, "生姜(ショウキョウ)":1, "附子(ブシ末)":0.5},
     "019":{"半夏(ハンゲ)":6,"乾姜(カンキョウ)":3,"甘草(カンゾウ)":3,"桂皮(ケイヒ)":3,"五味子(ゴミシ)":3,"細辛(サイシン)":3,"芍薬(シャクヤク)":3,"麻黄(マオウ)":3},
     "020":{"黄耆(オウギ)":5, "防已(ボウイ)":5,"蒼朮(ソウジュツ)":3,"大棗(タイソウ)":3,"甘草(カンゾウ)":1.5,"生姜(ショウキョウ)":1},
     "021":{"半夏(ハンゲ)":6,"茯苓(ブクリョウ)":5,"生姜(ショウキョウ)":1.5},
     "022":{"地黄(ジオウ)":3,"石膏(セッコウ)":3,"当帰(トウキ)":3,"牛蒡子(ゴボウシ)":2,"蒼朮(ソウジュツ)":2,"防風(ボウフウ)":2,"木通(モクツウ)":2,"胡麻(ゴマ)":1.5,"知母(チモ)":1.5,"甘草(カンゾウ)":1,"苦参(クジン)":1,"荊芥(ケイガイ)":1,"蝉退(センタイ)":1},
     "023":{"芍薬(シャクヤク)":4,"蒼朮(ソウジュツ)":4, "沢瀉(タクシャ)":4,"茯苓(ブクリョウ)":4,"川芎(センキュウ)":3,"当帰(トウキ)":3},
     "024":{"柴胡(サイコ)":3,"芍薬(シャクヤク)":3,"蒼朮(ソウジュツ)":3,"当帰(トウキ)":3,"茯苓(ブクリョウ)":3,"山梔子(サンシシ)":2,"牡丹皮(ボタンピ)":2,"甘草(カンゾウ)":1.5,"生姜(ショウキョウ)":1,"薄荷(ハッカ)":1},
     "025":{"桂皮(ケイヒ)":3,"芍薬(シャクヤク)":3,"桃仁(トウニン)":3,"茯苓(ブクリョウ)":3,"牡丹皮(ボタンピ)":3},
     "026":{"桂皮(ケイヒ)":4, "芍薬(シャクヤク)":4, "大棗(タイソウ)":4, "牡蠣(ボレイ)":3, "竜骨(リュウコツ)":3, "甘草(カンゾウ)":2, "生姜(ショウキョウ)":1.5},
     "027":{"杏仁(キョウニン)":5,"麻黄(マオウ)":5,"桂皮(ケイヒ)":4, "甘草(カンゾウ)":1.5},
     "028":{"石膏(セッコウ)":8,"麻黄(マオウ)":6,"蒼朮(ソウジュツ)":4,"大棗(タイソウ)":3,"甘草(カンゾウ)":2,"生姜(ショウキョウ)":1},
     "029":{"麦門冬(バクモンドウ)":10,"粳米(コウベイ)":5,"半夏(ハンゲ)":5,"大棗(タイソウ)":3,"甘草(カンゾウ)":2,"人参(ニンジン)":2},
     "030":{"茯苓(ブクリョウ)":4,"芍薬(シャクヤク)":3,"蒼朮(ソウジュツ)":3,"生姜(ショウキョウ)":1.5,"附子(ブシ末)":0.5},
     "031":{"大棗(タイソウ)":4,"人参(ニンジン)":2,"呉茱萸(ゴシュユ)":3,"生姜(ショウキョウ)":1.5},
     "032":{"乾姜(カンキョウ)":3,"甘草(カンゾウ)":3,"蒼朮(ソウジュツ)":3,"人参(ニンジン)":3},
     "033":{"冬瓜子(トウガシ)":6,"桃仁(トウニン)":4,"牡丹皮(ボタンピ)":4,"大黄(ダイオウ)":2,"芒硝(ボウショウ)":1.8},
     "034":{"石膏(セッコウ)":15,"粳米(コウベイ)":8,"知母(チモ)":5,"甘草(カンゾウ)":2,"人参(ニンジン)":1.5},
     "035":{"柴胡(サイコ)":5,"芍薬(シャクヤク)":4,"枳実(キジツ)":2,"甘草(カンゾウ)":1.5},
     "036":{"石膏(セッコウ)":10,"防已(ボウイ)":4,"桂皮(ケイヒ)":3,"人参(ニンジン)":3},
     "037":{"陳皮(チンピ)":3,"半夏(ハンゲ)":3,"白朮(ビャクジュツ)":3,"茯苓(ブクリョウ)":3,"天麻(テンマ)":2,"麦芽(バクガ)":2,"黄耆(オウギ)":1.5,"沢瀉(タクシャ)":1.5,"人参(ニンジン)":1.5,"黄柏(オウバク)":1,"乾姜(カンキョウ)":1,"生姜(ショウキョウ)":0.5},
     "038":{"大棗(タイソウ)":5,"桂皮(ケイヒ)":3,"芍薬(シャクヤク)":3,"当帰(トウキ)":3,"木通(モクツウ)":3,"甘草(カンゾウ)":2,"呉茱萸(ゴシュユ)":2,"細辛(サイシン)":2,"生姜(ショウキョウ)":1},
     "039":{"茯苓(ブクリョウ)":6,"桂皮(ケイヒ)":4,"蒼朮(ソウジュツ)":3,"甘草(カンゾウ)":2},
     "040":{"滑石(カッセキ)":3,"沢瀉(タクシャ)":3,"猪苓(チョレイ)":3,"茯苓(ブクリョウ)":3,"阿膠(アキョウ)":3},
     "041":{"黄耆(オウギ)":4,"蒼朮(ソウジュツ)":4,"人参(ニンジン)":4,"当帰(トウキ)":3,"柴胡(サイコ)":2,"大棗(タイソウ)":2,"陳皮(チンピ)":2,"甘草(カンゾウ)":1.5,"升麻(ショウマ)":1,"生姜(ショウキョウ)":0.5},
     "043":{"蒼朮(ソウジュツ)":4,"人参(ニンジン)":4,"半夏(ハンゲ)":4,"茯苓(ブクリョウ)":4,"大棗(タイソウ)":2,"陳皮(チンピ)":2,"甘草(カンゾウ)":1,"生姜(ショウキョウ)":0.5},
     "045":{"桂皮(ケイヒ)":4,"芍薬(シャクヤク)":4,"大棗(タイソウ)":4,"甘草(カンゾウ)":2,"生姜(ショウキョウ)":1.5},
     "046":{"芍薬(シャクヤク)":4,"当帰(トウキ)":4,"黄耆(オウギ)":3,"地黄(ジオウ)":3,"川芎(センキュウ)":3,"釣藤鈎(チョウトウコウ)":3,"黄柏(オウバク)":2},
     "047":{"石膏(セッコウ)":5,"釣藤鈎(チョウトウコウ)":3,"陳皮(チンピ)":3,"麦門冬(バクモンドウ)":3,"半夏(ハンゲ)":3,"茯苓(ブクリョウ)":3,"菊花(キクカ)":2,"人参(ニンジン)":2,"防風(ボウフウ)":2,"甘草(カンゾウ)":1,"生姜(ショウキョウ)":1},
     "048":{"黄耆(オウギ)":3,"桂皮(ケイヒ)":3,"地黄(ジオウ)":3,"芍薬(シャクヤク)":3,"川芎(センキュウ)":3,"蒼朮(ソウジュツ)":3,"当帰(トウキ)":3,"人参(ニンジン)":3,"茯苓(ブクリョウ)":3,"甘草(カンゾウ)":1.5},
     "050":{"黄芩(オウゴン)":1.5,"黄柏(オウバク)":1.5,"黄連(オウレン)":1.5,"桔梗(キキョウ)":1.5,"枳実(キジツ)":1.5,"荊芥(ケイガイ)":1.5,"柴胡(サイコ)":1.5,"山梔子(サンシシ)":1.5,"地黄(ジオウ)":1.5,"芍薬(シャクヤク)":1.5,"川芎(センキュウ)":1.5,"当帰(トウキ)":1.5,"薄荷(ハッカ)":1.5,"白芷(ビャクシ)":1.5,"防風(ボウフウ)":1.5,"連翹(レンギョウ)":1.5,"甘草(カンゾウ)":1},


     

}

# キーの統一（"001" → "1" の形に変換）
normalized_kampo_data = {str(int(k)): v for k, v in kampo_data.items()}

def get_kampo_ingredients(kampo_numbers):
    """指定された漢方番号の成分を合計して返す"""
    result = {}
    missing_kampo = []

    for num in kampo_numbers:
        normalized_num = str(int(num))  # "001" → "1" に変換

        if normalized_num in normalized_kampo_data:
            for ingredient, amount in normalized_kampo_data[normalized_num].items():
                result[ingredient] = result.get(ingredient, 0) + amount
        else:
            missing_kampo.append(num)

    if missing_kampo:
        print(f"⚠ 以下の漢方番号はデータにありません: {', '.join(missing_kampo)}")

    return result

# ユーザーが何度でも入力できるように無限ループ
while True:
    user_input = input("\n漢方番号をカンマで区切って入力してください（例：1,2） : ").strip()

    # 終了コマンド
    if user_input.lower() in ["q", "exit", "quit", "終了"]:
        print("💡 プログラムを終了します。")
        break

    # 入力を処理
    selected_kampo = user_input.replace(" ", "").split(",")

    # 成分の合計計算
    ingredients = get_kampo_ingredients(selected_kampo)

    # 結果表示
    if ingredients:
        print("\n✅ 合計成分量:")
        for ingredient, amount in ingredients.items():
            print(f" - {ingredient}: {amount}g")